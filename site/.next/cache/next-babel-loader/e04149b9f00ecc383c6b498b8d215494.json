{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\wojtalam\\\\Workspace\\\\Github\\\\arc-keystone5\\\\site\\\\components\\\\auth\\\\signin.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\n/** @jsx jsx */\nimport { useState } from 'react';\nimport { jsx } from '@emotion/core';\nimport { useAuth } from '../../lib/authetication';\nimport { Button, Field, Group, Label, Link, Input } from '../../primitives/forms';\nimport { gridSize, colors } from '../../theme';\n\nconst onChange = handler => e => handler(e.target.value);\n\nexport default (({\n  onSuccess,\n  onClickForgot\n}) => {\n  const {\n    0: email,\n    1: setEmail\n  } = useState('');\n  const {\n    0: password,\n    1: setPassword\n  } = useState('');\n  const {\n    0: isLoading,\n    1: setIsLoading\n  } = useState(false);\n  const {\n    0: errorState,\n    1: setErrorState\n  } = useState(false);\n  const {\n    isAuthenticated,\n    signin\n  } = useAuth();\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    setIsLoading(true);\n\n    try {\n      await signin({\n        email,\n        password\n      });\n      setIsLoading(false);\n      setErrorState(false);\n\n      if (onSuccess && typeof onSuccess === 'function') {\n        onSuccess();\n      }\n    } catch (error) {\n      setErrorState(true);\n    }\n  };\n\n  return jsx(React.Fragment, null, errorState && jsx(\"p\", {\n    css: {\n      color: colors.red\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }, \"Please check your email and password then try again.\"), jsx(\"form\", {\n    css: {\n      marginTop: gridSize * 3\n    },\n    noValidate: true,\n    onSubmit: handleSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, jsx(Field, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, jsx(Label, {\n    htmlFor: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43\n    },\n    __self: this\n  }, \"Email\"), jsx(Input, {\n    autoComplete: \"email\",\n    autoFocus: true,\n    disabled: isLoading || isAuthenticated,\n    onChange: onChange(setEmail),\n    placeholder: \"you@awesome.com\",\n    required: true,\n    type: \"text\",\n    value: email,\n    id: \"email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44\n    },\n    __self: this\n  })), jsx(Field, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, jsx(Label, {\n    htmlFor: \"password\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, \"Password\"), jsx(Input, {\n    autoComplete: \"password\",\n    disabled: isLoading || isAuthenticated,\n    id: \"password\",\n    minLength: \"8\",\n    onChange: onChange(setPassword),\n    placeholder: \"supersecret\",\n    required: true,\n    type: \"password\",\n    value: password,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  })), jsx(Group, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, isLoading ? jsx(Button, {\n    disabled: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, \"Signing in...\") : jsx(Button, {\n    type: \"submit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"Sign in\"), jsx(Link, {\n    href: \"/forgot-password\",\n    onClick: onClickForgot,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, \"Forgot password\"))));\n});","map":{"version":3,"sources":["C:/Users/wojtalam/Workspace/Github/arc-keystone5/site/components/auth/signin.js"],"names":["useState","jsx","useAuth","Button","Field","Group","Label","Link","Input","gridSize","colors","onChange","handler","e","target","value","onSuccess","onClickForgot","email","setEmail","password","setPassword","isLoading","setIsLoading","errorState","setErrorState","isAuthenticated","signin","handleSubmit","event","preventDefault","error","color","red","marginTop"],"mappings":"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","sourcesContent":["/** @jsx jsx */\n\nimport { useState } from 'react';\nimport { jsx } from '@emotion/core';\n\nimport { useAuth } from '../../lib/authetication';\nimport { Button, Field, Group, Label, Link, Input } from '../../primitives/forms';\nimport { gridSize, colors } from '../../theme';\n\nconst onChange = handler => e => handler(e.target.value);\n\nexport default ({ onSuccess, onClickForgot }) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [errorState, setErrorState] = useState(false);\n  const { isAuthenticated, signin } = useAuth();\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n\n    setIsLoading(true);\n    try {\n      await signin({ email, password });\n      setIsLoading(false);\n      setErrorState(false);\n      if (onSuccess && typeof onSuccess === 'function') {\n        onSuccess();\n      }\n    } catch (error) {\n      setErrorState(true);\n    }\n  };\n\n  return (\n    <>\n      {errorState && (\n        <p css={{ color: colors.red }}>Please check your email and password then try again.</p>\n      )}\n\n      <form css={{ marginTop: gridSize * 3 }} noValidate onSubmit={handleSubmit}>\n        <Field>\n          <Label htmlFor=\"email\">Email</Label>\n          <Input\n            autoComplete=\"email\"\n            autoFocus\n            disabled={isLoading || isAuthenticated}\n            onChange={onChange(setEmail)}\n            placeholder=\"you@awesome.com\"\n            required\n            type=\"text\"\n            value={email}\n            id=\"email\"\n          />\n        </Field>\n        <Field>\n          <Label htmlFor=\"password\">Password</Label>\n          <Input\n            autoComplete=\"password\"\n            disabled={isLoading || isAuthenticated}\n            id=\"password\"\n            minLength=\"8\"\n            onChange={onChange(setPassword)}\n            placeholder=\"supersecret\"\n            required\n            type=\"password\"\n            value={password}\n          />\n        </Field>\n\n        <Group>\n          {isLoading ? (\n            <Button disabled>Signing in...</Button>\n          ) : (\n            <Button type=\"submit\">Sign in</Button>\n          )}\n          <Link href=\"/forgot-password\" onClick={onClickForgot}>\n            Forgot password\n          </Link>\n        </Group>\n      </form>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}